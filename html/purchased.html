<!DOCTYPE html>
<html lang="vi">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Hàng đã mua - Cửa hàng Thiết bị Điện tử</title>
  <link rel="stylesheet" href="../css/index.css" />
  <link rel="stylesheet" href="../css/layout.css" />
</head>

<body>
  <header>
    <div class="container">
      <h1>Cửa hàng Thiết bị Điện tử</h1>
    </div>
  </header>

  <nav>
    <ul class="menu">
      <li><a href="index.html">Trang chủ</a></li>
      <li><a href="#">Sản phẩm</a>
        <ul class="submenu">
          <li><a href="#">Phụ kiện</a></li>
          <li><a href="#">Điện thoại</a></li>
          <li><a href="#">Laptop</a></li>
          <li><a href="#">Máy tính bảng</a></li>
        </ul>
      </li>
      <li><a href="#sale">Khuyến mãi</a></li>
      <li><a href="mailto:lethanhlytrung123@gmail.com">Liên hệ</a></li>
      <li><a href="purchased.html">Hàng đã mua</a></li>
      <li class="account-menu">
        <a href="#">Tài khoản</a>
        <ul class="submenu">
          <li><a href="profile.html" id="profile-btn">Hồ sơ</a></li>
          <li><a href="login.html" id="logout-btn">Đăng xuất</a></li>
        </ul>
      </li>
    </ul>
  </nav>

  <main class="products">
    <h1>Hàng đã mua</h1>
    <div id="purchased-list"></div>
    <p><a href="index.html">Quay lại trang chủ</a></p>
  </main>

  <footer>
    <p>Địa chỉ: 1651, Lê Văn Lương</p>
    <p>Email: <a href="mailto:lethanhlytrung123@gmail.com">Liên hệ</a></p>
    <p>Điện thoại: 0123 456 789</p>
  </footer>

  <script>
    const user = JSON.parse(localStorage.getItem('loggedInUser'));
    const container = document.getElementById('purchased-list');
    if (!user) {
      container.innerHTML = '<p>Bạn cần đăng nhập để xem hàng đã mua.</p>';
    } else {
      const purchasedKey = 'purchased_' + user.username;
      const purchased = JSON.parse(localStorage.getItem(purchasedKey) || '[]');
      if (purchased.length === 0) {
        container.innerHTML = '<p>Bạn chưa mua sản phẩm nào.</p>';
      } else {
        container.innerHTML = `
          <table>
            <thead>
              <tr>
                <th>Tên sản phẩm</th>
                <th>Hình ảnh</th>
                <th>Giá</th>
                <th>Số lượng</th>
                <th>Ngày mua</th>
              </tr>
            </thead>
            <tbody>
              ${purchased.map(item => `
                <tr>
                  <td>${item.name}</td>
                  <td><img src="${item.img}" style="width: 50px; height: 50px;"></td>
                  <td>${item.price.toLocaleString('vi-VN')}₫</td>
                  <td>${item.qty}</td>
                  <td>${new Date(item.date).toLocaleString('vi-VN')}</td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        `;
      }
    }
  </script>
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      var profileBtn = document.getElementById('profile-btn');
      if (profileBtn) {
        profileBtn.addEventListener('click', function(e) {
          e.preventDefault();
          window.location.href = 'profile.html';
        });
      }
    });
  </script>
  <script>
  document.body.classList.add('fade-in');
</script>
<script src="../js/data.js"></script>
  <script src="../js/render-products.js"></script>
  <script src="../js/nav.js"></script>
  <script src="../js/transition.js"></script>
</body>

</html>
